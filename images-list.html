<link rel="import" href="components/polymer/polymer.html">

<link rel="import" href="image-service/image-service.html">

<polymer-element name="images-list" attributes="show">
  <template>
    <style>
      :host {
        display: block;
        width: 100%;
      }

      .chip {
        display: inline-block;
        background: white;
        box-sizing: border-box;
        width: 200px;
        height: 200px;
        padding:2px;
        margin: 16px;
      }

      core-image {
        width:100%;
        height: 100%;
      }
      
      .card {
        width: 100%;
        height: 500px;
        border-radius: 3px;
        /*text-align: start;*/
        /*overflow: hidden;*/
        background: #fff;
        box-shadow: 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        border: 1px solid black;
      }
      
      #details, section {
        width:100%;
        height:100%;
        border: 1px black solid;
      }
    </style>

    <image-service id="service" images="{{images}}" albumid="5702010536228604337"></image-service>
    
    <core-animated-pages selected="{{page}}" transitions="cross-fade-all hero-transition" on-core-animated-pages-transition-end="{{complete}}">
      <section>
        <div horizontal layout wrap hero-p on-tap="{{transition}}">
          <template repeat="{{image in images}}">
            <div class="chip" hero-id="{{image.id}}" hero?="{{selectedImage === image.id }}">
              <!--<paper-shadow z="1" fit>-->{{image.id}}
                  <!--<core-image-->
                  <!--  src="{{image.src}}"-->
                  <!--  sizing="cover"-->
                  <!--  preload-->
                  <!--  fade >-->
                  <!--</core-image>-->
                  <!--<paper-ripple hero-id="{{image.src}}" fit hero?="{{selectedImage === image.src }}" on-tap="{{transition}}" hero-p></paper-ripple>-->
              <!--</paper-shadow>-->
            </div>
          </template>
        </div>
      </section>
      
      <section id="details">
        <div class="card" layout horizontal hero-id="{{selectedImage.id}}" hero on-tap="{{transition}}">
          <div>{{images[selectedImage].src}}</div>
          
          <!--<core-image-->
          <!--          src="{{selectedImage}}"-->
          <!--          preload-->
          <!--          fade >-->
          <!--        </core-image>-->
        </div>
      </section>
      
    </core-animated-pages>
  </template>

  <script>
    Polymer({
      
      handleClick: function(e, detail, sender){
        console.log(sender.templateInstance.model.image.id);
      },
      
      page: 0,
      
      selectedImage: null,
      
      transition: function(e, detail, sender){
        if (this.page === 0 && e.target.templateInstance.model.image) {
          this.selectedImage = e.target.templateInstance.model.image;
          this.page = 1;
        }else{
          this.page = 0;
        }
      }
    });
  </script>
</polymer-element>
